    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
       "http://www.w3.org/TR/html4/strict.dtd">

    <html>
    <head>
      <title>figure.xsl coverage = 52/82 (63.41%)</title>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <link rel="stylesheet" href="source.css" type="text/css">
      <link rel="stylesheet" href="cover.css" type="text/css">
      <script type="text/javascript" src="covertable.js"></script>
    </head>
    <body onload="fill_popups()">
    <h2>figure.xsl coverage = 52/82 (63.41%)</h2>
    <div class="popup-list">
<span class="popuptext" id="pop-9"><pre></pre></span><span class="popuptext" id="pop-10"><pre></pre></span><span class="popuptext" id="pop-11"><pre></pre></span><span class="popuptext" id="pop-12"><pre></pre></span><span class="popuptext" id="pop-15"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (template)
</pre></span><span class="popuptext" id="pop-16"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (text)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (text)
</pre></span><span class="popuptext" id="pop-18"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (choose)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (choose)
</pre></span><span class="popuptext" id="pop-22"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (when)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (when)
</pre></span><span class="popuptext" id="pop-23"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (text)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (text)
</pre></span><span class="popuptext" id="pop-24"><pre></pre></span><span class="popuptext" id="pop-28"><pre></pre></span><span class="popuptext" id="pop-29"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (text)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (text)
</pre></span><span class="popuptext" id="pop-32"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (apply-templates)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (apply-templates)
</pre></span><span class="popuptext" id="pop-34"><pre></pre></span><span class="popuptext" id="pop-37"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (call-template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (call-template)
</pre></span><span class="popuptext" id="pop-38"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (apply-templates)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (apply-templates)
</pre></span><span class="popuptext" id="pop-39"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (call-template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (call-template)
</pre></span><span class="popuptext" id="pop-42"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (apply-templates)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (apply-templates)
</pre></span><span class="popuptext" id="pop-44"><pre></pre></span><span class="popuptext" id="pop-45"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (text)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (text)
</pre></span><span class="popuptext" id="pop-46"><pre></pre></span><span class="popuptext" id="pop-56"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (template)
</pre></span><span class="popuptext" id="pop-57"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (param)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (param)
</pre></span><span class="popuptext" id="pop-58"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (value-of)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (value-of)
</pre></span><span class="popuptext" id="pop-59"><pre></pre></span><span class="popuptext" id="pop-61"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (template)
</pre></span><span class="popuptext" id="pop-62"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (param)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (param)
</pre></span><span class="popuptext" id="pop-63"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (value-of)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (value-of)
</pre></span><span class="popuptext" id="pop-64"><pre></pre></span><span class="popuptext" id="pop-77"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (template)
</pre></span><span class="popuptext" id="pop-78"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (param)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (param)
</pre></span><span class="popuptext" id="pop-80"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (choose)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (choose)
</pre></span><span class="popuptext" id="pop-95"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (when)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (when)
</pre></span><span class="popuptext" id="pop-97"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (choose)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (choose)
</pre></span><span class="popuptext" id="pop-98"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (when)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (when)
</pre></span><span class="popuptext" id="pop-99"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (if)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (if)
</pre></span><span class="popuptext" id="pop-104"><pre></pre></span><span class="popuptext" id="pop-105"><pre></pre></span><span class="popuptext" id="pop-107"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (otherwise)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (otherwise)
</pre></span><span class="popuptext" id="pop-108"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (if)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (if)
</pre></span><span class="popuptext" id="pop-110"><pre></pre></span><span class="popuptext" id="pop-112"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (text)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (text)
</pre></span><span class="popuptext" id="pop-113"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (apply-templates)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (apply-templates)
</pre></span><span class="popuptext" id="pop-115"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (if)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (if)
</pre></span><span class="popuptext" id="pop-116"><pre><a href="/tmp/xslc/traces/16312233053/source/introduction.xml.html#line-137">/home/ben/project/docbook/db2tex/dblatex/docs/introduction.xml:137</a> (call-template)
<a href="/tmp/xslc/traces/16312233053/source/pagesetup.xml.html#line-17">/home/ben/project/docbook/db2tex/dblatex/docs/pagesetup.xml:17</a> (call-template)
</pre></span><span class="popuptext" id="pop-118"><pre></pre></span><span class="popuptext" id="pop-119"><pre></pre></span><span class="popuptext" id="pop-120"><pre></pre></span><span class="popuptext" id="pop-121"><pre></pre></span><span class="popuptext" id="pop-122"><pre></pre></span><span class="popuptext" id="pop-123"><pre></pre></span><span class="popuptext" id="pop-124"><pre></pre></span></div>
<table class="sourcetable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126</pre></div></td><td class="code"><div class="source"><pre><span class="unused"><span class="cp">&lt;?xml version=&#39;1.0&#39;?&gt;</span>
</span><span class="unused"><span class="k">&lt;xsl:stylesheet</span> <span class="na">xmlns:xsl=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span> <span class="na">version=</span><span class="s">&#39;1.0&#39;</span><span class="nt">&gt;</span>
</span><span class="unused">
</span><span class="unused"><span class="c">&lt;!--############################################################################</span>
</span><span class="unused"><span class="c">    XSLT Stylesheet DocBook -&gt; LaTeX </span>
</span><span class="unused"><span class="c">    ############################################################################ --&gt;</span>
</span><span class="unused">
</span><span class="unused"><span class="c">&lt;!-- Figure parameters --&gt;</span>
</span><span class="covered"><span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;figure.title.top&quot;</span><span class="nt">&gt;</span>0<span class="k">&lt;/xsl:param&gt;</span>
</span><span class="covered"><span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;figure.anchor.top&quot;</span> <span class="na">select=</span><span class="s">&quot;$figure.title.top&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered"><span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;figure.default.position&quot;</span><span class="nt">&gt;</span>[htbp]<span class="k">&lt;/xsl:param&gt;</span>
</span><span class="covered"><span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;figure.default.align&quot;</span><span class="nt">&gt;</span>center<span class="k">&lt;/xsl:param&gt;</span>
</span><span class="unused">
</span><span class="unused">
</span><span class="covered"><span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;figure&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>\begin{figure}<span class="k">&lt;/xsl:text&gt;</span>
</span><span class="unused">  <span class="c">&lt;!-- figure placement preference --&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;@floatstyle != &#39;&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">      <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;@floatstyle&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;/xsl:when&gt;</span>
</span><span class="covered">    <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;not(@float) or (@float and @float=&#39;0&#39;)&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">      <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>[H]<span class="k">&lt;/xsl:text&gt;</span>
</span><span class="covered">    <span class="k">&lt;/xsl:when&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;xsl:otherwise</span><span class="nt">&gt;</span>
</span><span class="uncovered">      <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;$figure.default.position&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;/xsl:otherwise&gt;</span>
</span><span class="covered">  <span class="k">&lt;/xsl:choose&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span><span class="ni">&amp;#10;</span><span class="k">&lt;/xsl:text&gt;</span>
</span><span class="unused">
</span><span class="unused">  <span class="c">&lt;!-- title caption before the image --&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;.&quot;</span> <span class="na">mode=</span><span class="s">&quot;caption.and.label&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;xsl:with-param</span> <span class="na">name=</span><span class="s">&quot;position.top&quot;</span> <span class="na">select=</span><span class="s">&quot;1&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">  <span class="k">&lt;/xsl:apply-templates&gt;</span>
</span><span class="unused">
</span><span class="unused">  <span class="c">&lt;!-- &lt;xsl:text&gt;&amp;#10;\centering&amp;#10;&lt;/xsl:text&gt; --&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;figure.begin&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;*[not(self::title)]&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;figure.end&quot;</span><span class="nt">/&gt;</span>
</span><span class="unused">
</span><span class="unused">  <span class="c">&lt;!-- title caption after the image --&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;.&quot;</span> <span class="na">mode=</span><span class="s">&quot;caption.and.label&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;xsl:with-param</span> <span class="na">name=</span><span class="s">&quot;position.top&quot;</span> <span class="na">select=</span><span class="s">&quot;0&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">  <span class="k">&lt;/xsl:apply-templates&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>\end{figure}<span class="ni">&amp;#10;</span><span class="k">&lt;/xsl:text&gt;</span>
</span><span class="covered"><span class="k">&lt;/xsl:template&gt;</span>
</span><span class="unused">
</span><span class="unused">
</span><span class="uncovered"><span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;informalfigure&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">  <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;figure.begin&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered">  <span class="k">&lt;xsl:apply-templates</span><span class="nt">/&gt;</span>
</span><span class="uncovered">  <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;figure.end&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered"><span class="k">&lt;/xsl:template&gt;</span>
</span><span class="unused">
</span><span class="unused">
</span><span class="covered"><span class="k">&lt;xsl:template</span> <span class="na">name=</span><span class="s">&quot;figure.begin&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;align&quot;</span> <span class="na">select=</span><span class="s">&quot;$figure.default.align&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;concat(&#39;&amp;#10;\begin{&#39;,$align,&#39;}&amp;#10;&#39;)&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered"><span class="k">&lt;/xsl:template&gt;</span>
</span><span class="unused">
</span><span class="covered"><span class="k">&lt;xsl:template</span> <span class="na">name=</span><span class="s">&quot;figure.end&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;align&quot;</span> <span class="na">select=</span><span class="s">&quot;$figure.default.align&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:value-of</span> <span class="na">select=</span><span class="s">&quot;concat(&#39;&amp;#10;\end{&#39;,$align,&#39;}&amp;#10;&#39;)&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered"><span class="k">&lt;/xsl:template&gt;</span>
</span><span class="unused">
</span><span class="unused">
</span><span class="unused"><span class="c">&lt;!-- Caption and label must be handled at the same time because \caption</span>
</span><span class="unused"><span class="c">     increments the label counter and puts an anchor. Therefore putting a</span>
</span><span class="unused"><span class="c">     label *before* the related caption needs to manipulate the counters</span>
</span><span class="unused"><span class="c">     </span>
</span><span class="unused"><span class="c">     Limitation: it is not possible to put a caption on the top, and the</span>
</span><span class="unused"><span class="c">     label anchor at the bottom. The first caption anchor at the top prevails.</span>
</span><span class="unused"><span class="c">     Putting a label before the caption is possible because the</span>
</span><span class="unused"><span class="c">     duplicated label name when \caption is called is ignored</span>
</span><span class="unused"><span class="c">     (see latex warnings) --&gt;</span>
</span><span class="unused">
</span><span class="covered"><span class="k">&lt;xsl:template</span> <span class="na">match=</span><span class="s">&quot;figure&quot;</span> <span class="na">mode=</span><span class="s">&quot;caption.and.label&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:param</span> <span class="na">name=</span><span class="s">&quot;position.top&quot;</span><span class="nt">/&gt;</span>
</span><span class="unused">
</span><span class="covered">  <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
</span><span class="uncovered">  <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;$figure.title.top=&#39;1&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="unused">
</span><span class="uncovered">    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;$position.top=&#39;1&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">      <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>\caption<span class="k">&lt;/xsl:text&gt;</span>
</span><span class="uncovered">      <span class="k">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;title&quot;</span> <span class="na">mode=</span><span class="s">&quot;format.title&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;/xsl:if&gt;</span>
</span><span class="unused">
</span><span class="uncovered">    <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;$figure.anchor.top=$position.top&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">      <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;label.id&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">        <span class="k">&lt;xsl:with-param</span> <span class="na">name=</span><span class="s">&quot;object&quot;</span> <span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered">      <span class="k">&lt;/xsl:call-template&gt;</span>
</span><span class="uncovered">    <span class="k">&lt;/xsl:if&gt;</span>
</span><span class="unused">
</span><span class="uncovered">  <span class="k">&lt;/xsl:when&gt;</span>
</span><span class="covered">  <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;$figure.title.top=&#39;0&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="unused">
</span><span class="covered">    <span class="k">&lt;xsl:choose</span><span class="nt">&gt;</span>
</span><span class="covered">    <span class="k">&lt;xsl:when</span> <span class="na">test=</span><span class="s">&quot;$position.top=&#39;1&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">      <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;$figure.anchor.top=&#39;1&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">        <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>\refstepcounter{figure}<span class="k">&lt;/xsl:text&gt;</span>
</span><span class="uncovered">        <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;label.id&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">          <span class="k">&lt;xsl:with-param</span> <span class="na">name=</span><span class="s">&quot;object&quot;</span> <span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
</span><span class="uncovered">        <span class="k">&lt;/xsl:call-template&gt;</span>
</span><span class="covered">      <span class="k">&lt;/xsl:if&gt;</span>
</span><span class="covered">    <span class="k">&lt;/xsl:when&gt;</span>
</span><span class="unused">
</span><span class="covered">    <span class="k">&lt;xsl:otherwise</span><span class="nt">&gt;</span>
</span><span class="covered">      <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;$figure.anchor.top=&#39;1&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">        <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>\addtocounter{figure}{-1}<span class="k">&lt;/xsl:text&gt;</span>
</span><span class="covered">      <span class="k">&lt;/xsl:if&gt;</span>
</span><span class="unused">
</span><span class="covered">      <span class="k">&lt;xsl:text</span><span class="nt">&gt;</span>\caption<span class="k">&lt;/xsl:text&gt;</span>
</span><span class="covered">      <span class="k">&lt;xsl:apply-templates</span> <span class="na">select=</span><span class="s">&quot;title&quot;</span> <span class="na">mode=</span><span class="s">&quot;format.title&quot;</span><span class="nt">/&gt;</span>
</span><span class="unused">
</span><span class="covered">      <span class="k">&lt;xsl:if</span> <span class="na">test=</span><span class="s">&quot;$figure.anchor.top=&#39;0&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class="covered">        <span class="k">&lt;xsl:call-template</span> <span class="na">name=</span><span class="s">&quot;label.id&quot;</span><span class="nt">&gt;</span>
</span><span class="uncovered">          <span class="k">&lt;xsl:with-param</span> <span class="na">name=</span><span class="s">&quot;object&quot;</span> <span class="na">select=</span><span class="s">&quot;.&quot;</span><span class="nt">/&gt;</span>
</span><span class="covered">        <span class="k">&lt;/xsl:call-template&gt;</span>
</span><span class="covered">      <span class="k">&lt;/xsl:if&gt;</span>
</span><span class="covered">    <span class="k">&lt;/xsl:otherwise&gt;</span>
</span><span class="covered">    <span class="k">&lt;/xsl:choose&gt;</span>
</span><span class="covered">  <span class="k">&lt;/xsl:when&gt;</span>
</span><span class="covered">  <span class="k">&lt;/xsl:choose&gt;</span>
</span><span class="covered"><span class="k">&lt;/xsl:template&gt;</span>
</span><span class="unused">
</span><span class="unused"><span class="k">&lt;/xsl:stylesheet&gt;</span>
</span></pre></div>
</td></tr></table>    </body>
    </html>
    