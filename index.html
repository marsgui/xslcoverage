<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>XSL Coverage by marsgui</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>XSL Coverage</h1>
        <p>Python scripts to compute XSL Coverage</p>

        <p class="view"><a href="https://github.com/marsgui/xslcoverage">View the Project on GitHub <small>marsgui/xslcoverage</small></a></p>


        <ul>
          <li><a href="https://github.com/marsgui/xslcoverage/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/marsgui/xslcoverage/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/marsgui/xslcoverage">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="xsl-coverage" class="anchor" href="#xsl-coverage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>XSL Coverage</h1>

<p>This project contains some python scripts and a Saxon plugin to be able to
compute the XSL Coverage of your XSL stylesheets. The coverage is given by HTML
files showing the coverage rates, and for each XSL stylesheet involved, the
covered lines, and what XML sources cover that line.</p>

<h2>
<a id="install-the-package" class="anchor" href="#install-the-package" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install the package</h2>

<h3>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Dependencies</h3>

<p>The package depends on the following software:</p>

<ul>
<li>Saxon: this is the core XSLT used t process the stylesheets. Currently it
works with Saxon 6.5.5.</li>
<li>Xerces2: contains some java archives used to be able to process XML documents
using XInclude</li>
<li>XML Resolver: java archive by Apache to resolve XML catalogs</li>
<li>pygments: a python module used to display in HTML prettified source code</li>
</ul>

<h3>
<a id="install-script" class="anchor" href="#install-script" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Install Script</h3>

<p>To install the package, use the standard python setup script provided. It
also supports the following specific install options, used to build the
classpath used when java runs saxon to process the stylesheets:</p>

<p><code>--saxon-path</code>
:       Path where the saxon.jar archive is.</p>

<p><code>--xerces-path</code>
:       Path where the xercesImpl.jar archive is. This archive is one of the
        archive provided by the Xerces2 bundle.</p>

<p><code>--xml-resolver-path</code>
:       Path of the xml-resolver.jar provided by the Apache Fundation. Used
        to resolve catalogs.</p>

<p>When a path-option is not used the default path used to build the classpath 
is <code>/usr/share/java</code>.</p>

<p>Example:</p>

<pre><code>$ python setup.py install --prefix=/path/to/install
                          --saxon-path=/usr/share/java/saxon-6.5.5
                          --xerces-path=/usr/share/java/xerces-2_11_0
</code></pre>

<h2>
<a id="how-to-produce-the-coverage-data" class="anchor" href="#how-to-produce-the-coverage-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to produce the coverage data</h2>

<p>Once installed, several scripts are provided. What you can do:</p>

<ol>
<li><p>You can simply call saxon-xslt2, to replace the default saxon-xslt script.
It works like the original, except that it creates a trace file containing
the raw information of the XSL stylesheet line processed, and for which XML
source.</p></li>
<li>
<p>Instead, you can also call runcover to run XSLT on your stylesheet(s) and
output the trace file in a more consistent way. It calls the saxon-xslt2
wrapper of saxon, process the stylesheet(s) on your XML document, and it
outputs some trace files that can be processed on the fly to compute the
coverage, or that can be processed later. It produces a tracelog file
containing all the necessary data needed for post-processing by xmlcover.</p>

<pre><code>$ runcover --trace-dir=/path/to/traces [saxon options] \
          file.xml stylesheet.xsl
...
Write traces to /path/to/traces/16312223507/trace-0001.xml
...
Write Trace log '/path/to/traces/16312223507/tracelog.xml'
...
</code></pre>
</li>
<li>
<p>To compute the coverage from existing trace files, can xmlcover on the
tracelog file built by runcover. It produces a bunch of HTML files of
pretty printed XSL stylesheets with coverage information.</p>

<pre><code>$ xmlcover --from-log=/path/to/traces/16312223507/trace.log.xml \
          --html-dir=/path/to/coverage-report
...
/path/to/coverage-report/coverage_index.html
</code></pre>
</li>
<li>
<p>The package provides as an example a more sophisticated wrapper to call
dblatex and produce coverage data. It works like runcover, except that
it configures and calls dblatex the right way.</p>

<pre><code>$ dbcover --trace-dir=/path/to/traces --report [dblatex options] document.xml
...
Write traces to /path/to/traces/16312563508/trace-0001.xml
...
Write Trace log '/path/to/traces/16312563508/tracelog.xml'
...
/path/to/traces/16312563508/coverage_index.html
</code></pre>
</li>
</ol>

<h2>
<a id="how-to-use-the-coverage-data" class="anchor" href="#how-to-use-the-coverage-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use the coverage data</h2>

<p>The main HTML coverage file is called coverage_index.html. Use your prefered
web browser to view it.</p>

<ul>
<li>It contains the list of the XSL file, and their computed coverage.</li>
<li>There is a link to each XSL file, that gives which lines are covered or not</li>
<li>For each line covered, clicking on them popup the list of the XML lines that
originate the call of this XSL line.</li>
</ul>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h2>

<p>See here an example of coverage:
<a href="https://marsgui.github.io/xslcoverage/example/traces/coverage_index.html" title="Coverage Example">coverage_index.html</a></p>

<h2>
<a id="copyright" class="anchor" href="#copyright" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Copyright</h2>

<p>See the COPYRIGHT in the package.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/marsgui">marsgui</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
