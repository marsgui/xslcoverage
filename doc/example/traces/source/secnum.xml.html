<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
  <title>secnum.xml</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <link rel="stylesheet" href="source.css" type="text/css">
</head>
<body>
<h2>secnum.xml</h2>

<table class="sourcetable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145</pre></div></td><td class="code"><div class="source"><pre><a name="line-1"></a><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;</span>
<a name="line-2"></a><span class="cp">&lt;!DOCTYPE section PUBLIC &quot;-//OASIS//DTD DocBook XML V4.4//EN&quot;</span>
<a name="line-3"></a><span class="cp">&quot;http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd&quot;&gt;</span>
<a name="line-4"></a><span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">&quot;sec-section-num&quot;</span><span class="nt">&gt;</span>
<a name="line-5"></a><span class="nt">&lt;title&gt;</span>Chapter and Section numbering<span class="nt">&lt;/title&gt;</span>
<a name="line-6"></a>
<a name="line-7"></a><span class="nt">&lt;section&gt;</span>
<a name="line-8"></a><span class="nt">&lt;title&gt;</span>Depth of Section numbering and Table Of Content<span class="nt">&lt;/title&gt;</span>
<a name="line-9"></a>
<a name="line-10"></a><span class="nt">&lt;para&gt;&lt;command&gt;</span>Dblatex<span class="nt">&lt;/command&gt;</span> relies on latex to automatically compute the
<a name="line-11"></a>chapter and section numbers. It also relies on latex to produce the headings
<a name="line-12"></a>with these numbers, and to produce the Table Of Content containing these
<a name="line-13"></a>entries.<span class="nt">&lt;/para&gt;</span>
<a name="line-14"></a>
<a name="line-15"></a><span class="nt">&lt;para&gt;</span>Some specific sections like <span class="nt">&lt;sgmltag&gt;</span>preface<span class="nt">&lt;/sgmltag&gt;</span>,
<a name="line-16"></a><span class="nt">&lt;sgmltag&gt;</span>colophon<span class="nt">&lt;/sgmltag&gt;</span>, or <span class="nt">&lt;sgmltag&gt;</span>dedication<span class="nt">&lt;/sgmltag&gt;</span> are not numbered
<a name="line-17"></a>because they are displayed in front and back matters, but they can be listed in
<a name="line-18"></a>the TOC if the related parameters are set
<a name="line-19"></a>(<span class="nt">&lt;parameter&gt;</span>dedication.tocdepth<span class="nt">&lt;/parameter&gt;</span>, <span class="nt">&lt;parameter&gt;</span>preface.tocdepth<span class="nt">&lt;/parameter&gt;</span>, <span class="nt">&lt;parameter&gt;</span>colophon.tocdepth<span class="nt">&lt;/parameter&gt;</span>).<span class="nt">&lt;/para&gt;</span>
<a name="line-20"></a>
<a name="line-21"></a><span class="nt">&lt;para&gt;</span>More generally you can configure the depth of the chapter and section
<a name="line-22"></a>numbering with the parameter <span class="nt">&lt;parameter&gt;</span>doc.section.depth<span class="nt">&lt;/parameter&gt;</span>, and the
<a name="line-23"></a>depth of the entries in the TOC with the parameter
<a name="line-24"></a><span class="nt">&lt;parameter&gt;</span>toc.section.depth<span class="nt">&lt;/parameter&gt;&lt;/para&gt;</span>.
<a name="line-25"></a>
<a name="line-26"></a><span class="nt">&lt;para&gt;</span>Note however that an unumbered section
<a name="line-27"></a>becomes an informal component, and therefore you can only link to such a section
<a name="line-28"></a>by using a specific xrefstyle because their label built with the
<a name="line-29"></a>automatic number does not exist anymore. The other drawback is that
<a name="line-30"></a>all the sections included in an unnumbered section or chapter are
<a name="line-31"></a>unnumbered.<span class="nt">&lt;/para&gt;</span>
<a name="line-32"></a>
<a name="line-33"></a><span class="nt">&lt;/section&gt;</span>
<a name="line-34"></a><span class="nt">&lt;section&gt;</span>
<a name="line-35"></a><span class="nt">&lt;title&gt;</span>Using the latex style for section numbering<span class="nt">&lt;/title&gt;</span>
<a name="line-36"></a>
<a name="line-37"></a><span class="nt">&lt;para&gt;</span>A well customized latex style can be a powerfull yet versatile 
<a name="line-38"></a>alternative to the use of section and/or TOC depth parameter. With some latex
<a name="line-39"></a>packages you can easily format the headings to remove the numbers, or transform them. See <span class="nt">&lt;xref</span> <span class="na">linkend=</span><span class="s">&quot;sec-custom-latex&quot;</span><span class="nt">/&gt;</span> to know how to use your own latex
<a name="line-40"></a>style with <span class="nt">&lt;command&gt;</span>dblatex<span class="nt">&lt;/command&gt;</span>.<span class="nt">&lt;/para&gt;</span>
<a name="line-41"></a>
<a name="line-42"></a><span class="nt">&lt;para&gt;</span>The benefit of this method is that you can fully control how the titles
<a name="line-43"></a>must be displayed, you do not have to play with latex counters to have the right
<a name="line-44"></a>depth, and the sections do not lost their formal number label.<span class="nt">&lt;/para&gt;</span>
<a name="line-45"></a>
<a name="line-46"></a><span class="nt">&lt;para&gt;</span>The following example shows how you can customize the chapter title by
<a name="line-47"></a>using the latex package titlesec, and shows how to remove the chapter label in
<a name="line-48"></a>the Table Of Content with the package titletoc. Look in particular in the
<a name="line-49"></a>listing where text is emphasized.<span class="nt">&lt;/para&gt;</span>
<a name="line-50"></a>
<a name="line-51"></a><span class="nt">&lt;para&gt;&lt;programlisting</span> <span class="na">language=</span><span class="s">&quot;tex&quot;</span><span class="nt">&gt;</span>
<a name="line-52"></a><span class="cp">&lt;![CDATA[\usepackage{titlesec}</span>
<a name="line-53"></a>
<a name="line-54"></a><span class="cp">%% Example 1: Redefines the heading to remove the chapter label</span>
<a name="line-55"></a><span class="cp">%% The 2nd parameter only contains \filcenter without any label</span>
<a name="line-56"></a><span class="cp">\titleformat{\chapter}[block]</span>
<a name="line-57"></a><span class="cp">{\filcenter\huge}{]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span><span class="cp">&lt;![CDATA[\filcenter]]&gt;</span><span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[}{20pt}{\Huge}</span>
<a name="line-58"></a>
<a name="line-59"></a><span class="cp">%% Example 2: Put the chapter number in word</span>
<a name="line-60"></a><span class="cp">%% The title of the first chapter is then displayed like this:</span>
<a name="line-61"></a><span class="cp">%% &quot;Chapter One &lt;chapter title&gt;&quot;</span>
<a name="line-62"></a><span class="cp">\newcommand\makeletterof[1]{%</span>
<a name="line-63"></a><span class="cp">\ifthenelse{\equal{#1}{1}}{ONE}{%</span>
<a name="line-64"></a><span class="cp">\ifthenelse{\equal{#1}{2}}{TWO}{%</span>
<a name="line-65"></a><span class="cp">\ifthenelse{\equal{#1}{3}}{THREE}{%</span>
<a name="line-66"></a><span class="cp">\ifthenelse{\equal{#1}{4}}{FOUR}{%</span>
<a name="line-67"></a><span class="cp">\ifthenelse{\equal{#1}{5}}{FIVE}{%</span>
<a name="line-68"></a><span class="cp">\ifthenelse{\equal{#1}{6}}{SIX}{%</span>
<a name="line-69"></a><span class="cp">\ifthenelse{\equal{#1}{7}}{SEVEN}{%</span>
<a name="line-70"></a><span class="cp">\ifthenelse{\equal{#1}{8}}{EIGHT}{%</span>
<a name="line-71"></a><span class="cp">\ifthenelse{\equal{#1}{9}}{NINE}{%</span>
<a name="line-72"></a><span class="cp">\ifthenelse{\equal{#1}{10}}{TEN}{%</span>
<a name="line-73"></a><span class="cp">\ifthenelse{\equal{#1}{11}}{ELEVEN}{%</span>
<a name="line-74"></a><span class="cp">\ifthenelse{\equal{#1}{12}}{TWELVE}{%</span>
<a name="line-75"></a><span class="cp">#1}}}}}}}}}}}}}</span>
<a name="line-76"></a>
<a name="line-77"></a><span class="cp">\titleformat{\chapter}[block]</span>
<a name="line-78"></a><span class="cp">{\filcenter\ttfamily\huge}%</span>
<a name="line-79"></a><span class="cp">{]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span><span class="cp">&lt;![CDATA[\filcenter\MakeUppercase{\chaptertitlename} \makeletterof{\thechapter}]]&gt;</span><span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[}{20pt}{\Huge}</span>
<a name="line-80"></a>
<a name="line-81"></a>
<a name="line-82"></a><span class="cp">%% Make TOC entries for chapters without label</span>
<a name="line-83"></a><span class="cp">\usepackage{titletoc}</span>
<a name="line-84"></a>
<a name="line-85"></a><span class="cp">\titlecontents{chapter} %</span>
<a name="line-86"></a><span class="cp">[1.5em] % </span>
<a name="line-87"></a><span class="cp">{\addvspace{1em plus 0pt}\bfseries} %</span>
<a name="line-88"></a><span class="cp">{]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span><span class="cp">&lt;![CDATA[\hspace{-1.3em}]]&gt;</span><span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[} % no number, remove room reserved for it </span>
<a name="line-89"></a><span class="cp">{\hspace{-1.3em}} %</span>
<a name="line-90"></a><span class="cp">{\hfill \contentspage} %</span>
<a name="line-91"></a><span class="cp">[\addvspace {0pt}]</span>
<a name="line-92"></a><span class="cp">]]&gt;</span><span class="nt">&lt;/programlisting&gt;&lt;/para&gt;</span>
<a name="line-93"></a>
<a name="line-94"></a><span class="nt">&lt;/section&gt;</span>
<a name="line-95"></a><span class="nt">&lt;section&gt;</span>
<a name="line-96"></a><span class="nt">&lt;title&gt;</span>Using the <span class="nt">&lt;sgmltag&gt;</span>label<span class="nt">&lt;/sgmltag&gt;</span> attribute<span class="nt">&lt;/title&gt;</span>
<a name="line-97"></a>
<a name="line-98"></a><span class="nt">&lt;para&gt;</span>If you need to mix numbered and not numbered chapters, the numbering depth
<a name="line-99"></a>parameters will not help. The latex style will not easily detect that for
<a name="line-100"></a>some chapters the number should be displayed and for others it should not.
<a name="line-101"></a><span class="nt">&lt;/para&gt;</span>
<a name="line-102"></a>
<a name="line-103"></a><span class="nt">&lt;para&gt;</span>To mix numbered and unnumbered chapters you can use a label with an 
<a name="line-104"></a>empty string for the chapters that must not be numbered, as shown by the example
<a name="line-105"></a>below.<span class="nt">&lt;/para&gt;</span>
<a name="line-106"></a>
<a name="line-107"></a><span class="nt">&lt;para&gt;&lt;programlisting</span> <span class="na">language=</span><span class="s">&quot;XML&quot;</span><span class="nt">&gt;</span>
<a name="line-108"></a><span class="cp">&lt;![CDATA[&lt;chapter id=&quot;intro&quot; ]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span>label=&quot;&quot;<span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[&gt;&lt;title&gt;Introduction&lt;/title&gt;</span>
<a name="line-109"></a><span class="cp">  &lt;!-- This chapter must be displayed with no number, like a preface --&gt;</span>
<a name="line-110"></a><span class="cp">&lt;/chapter&gt;</span>
<a name="line-111"></a><span class="cp">&lt;chapter id=&quot;before&quot; ]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span>label=&quot;&quot;<span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[&gt;&lt;title&gt;Pre-requisite&lt;/title&gt;</span>
<a name="line-112"></a><span class="cp">  &lt;!-- This chapter must be displayed with no number, like a preface --&gt;</span>
<a name="line-113"></a><span class="cp">&lt;/chapter&gt;</span>
<a name="line-114"></a><span class="cp">&lt;chapter id=&quot;chap1&quot;&gt;&lt;title&gt;First chapter&lt;/title&gt;</span>
<a name="line-115"></a><span class="cp">  &lt;!-- First numbered chapter --&gt;</span>
<a name="line-116"></a><span class="cp">&lt;/chapter&gt;</span>
<a name="line-117"></a><span class="cp">...</span>
<a name="line-118"></a><span class="cp">&lt;chapter id=&quot;after&quot; ]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span>label=&quot;&quot;<span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[&gt;&lt;title&gt;Conclusion&lt;/title&gt;</span>
<a name="line-119"></a><span class="cp">  &lt;!-- This chapter must be displayed with no number, like a colophon --&gt;</span>
<a name="line-120"></a><span class="cp">&lt;/chapter&gt;</span>
<a name="line-121"></a><span class="cp">...</span>
<a name="line-122"></a><span class="cp">]]&gt;</span><span class="nt">&lt;/programlisting&gt;&lt;/para&gt;</span>
<a name="line-123"></a>
<a name="line-124"></a><span class="nt">&lt;para&gt;</span>You can also set a label to a specific integer to force a section
<a name="line-125"></a>counter. In this case there is no more automatic numbering. The automatic
<a name="line-126"></a>numbering then applies to the following sections that increment the counter
<a name="line-127"></a>set for this section if there is no label.<span class="nt">&lt;/para&gt;</span>
<a name="line-128"></a>
<a name="line-129"></a><span class="nt">&lt;para&gt;&lt;programlisting</span> <span class="na">language=</span><span class="s">&quot;XML&quot;</span><span class="nt">&gt;</span>
<a name="line-130"></a><span class="cp">&lt;![CDATA[&lt;chapter id=&quot;intro&quot; ]]&gt;</span><span class="nt">&lt;emphasis</span> <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span>label=&quot;2&quot;<span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[&gt;&lt;title&gt;Introduction&lt;/title&gt;</span>
<a name="line-131"></a><span class="cp">  &lt;!-- This chapter is forced to have number 2 (it should be 1) --&gt;</span>
<a name="line-132"></a><span class="cp">  &lt;section id=&quot;s1&quot; ]]&gt;</span><span class="nt">&lt;emphasis</span>
<a name="line-133"></a>  <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span>label=&quot;3&quot;<span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[&gt;&lt;title&gt;Section 2.3&lt;/title&gt;</span>
<a name="line-134"></a><span class="cp">    &lt;!-- This section is forced to have number 3 (it should be 1) --&gt;</span>
<a name="line-135"></a><span class="cp">    &lt;section id=&quot;s11&quot; ]]&gt;</span><span class="nt">&lt;emphasis</span>
<a name="line-136"></a>    <span class="na">role=</span><span class="s">&quot;bold&quot;</span><span class="nt">&gt;</span>label=&quot;4&quot;<span class="nt">&lt;/emphasis&gt;</span><span class="cp">&lt;![CDATA[&gt;&lt;title&gt;Section 2.3.4&lt;/title&gt;</span>
<a name="line-137"></a><span class="cp">      &lt;!-- This section is forced to have number 4 (it should be 1) --&gt;</span>
<a name="line-138"></a><span class="cp">    &lt;/section&gt;</span>
<a name="line-139"></a><span class="cp">  &lt;/section&gt;</span>
<a name="line-140"></a><span class="cp">&lt;/chapter&gt;</span>
<a name="line-141"></a><span class="cp">]]&gt;</span><span class="nt">&lt;/programlisting&gt;&lt;/para&gt;</span>
<a name="line-142"></a>
<a name="line-143"></a><span class="nt">&lt;/section&gt;</span>
<a name="line-144"></a>
<a name="line-145"></a><span class="nt">&lt;/section&gt;</span>
</pre></div>
</td></tr></table></body>
</html>
